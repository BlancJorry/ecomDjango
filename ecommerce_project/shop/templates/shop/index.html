{% load static %}
<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>Shop&Go</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" type="text/css" href="{% static 'shop/css/bootstrap.min.css' %}">
      <!-- style css -->
      <link rel="stylesheet" type="text/css" href="{% static 'shop/css/style.css' %}">
      <!-- Responsive-->
      <link rel="stylesheet" href="{% static 'shop/css/responsive.css' %}">
      <!-- fevicon -->
      <link rel="icon" href="{% static 'shop/images/fevicon.png' %}" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="{% static 'shop/css/jquery.mCustomScrollbar.min.css' %}">
      <!-- Tweaks for older IEs-->
      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
      <!-- fonts -->
      <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
      <!-- font awesome -->
      <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
      <!--  -->
      <!-- owl stylesheets -->
      <link href="https://fonts.googleapis.com/css?family=Great+Vibes|Poppins:400,700&display=swap&subset=latin-ext" rel="stylesheet">
      <link rel="stylesheet" href="{% static 'shop/css/owl.carousel.min.css' %}">
      <link rel="stylesoeet" href="{% static 'shop/css/owl.theme.default.min.css' %}">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
      <!-- Lien Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Lien Bootstrap JS (avec Popper.js) -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

   </head>
   <style>
      .alert-container {
    position: fixed;
    top: 10px;
    right: 10px;
    z-index: 1050;
    width: auto;
    max-width: 300px;
}
.alert {
    padding: 15px;
    margin-bottom: 10px;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(241, 152, 51, 0.1);

    
}
/* Style général pour la section des témoignages */
.testimonials_section {
   padding: 60px 0;
   background-color: #f9f9f9;
}

.testimonials_title {
   font-size: 36px;
   font-weight: 700;
   color: #333;
   margin-bottom: 30px;
   text-align: center;
}

.testimonial-box {
   background-color: #fff;
   padding: 20px;
   box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
   border-radius: 10px;
}

.testimonial-img {
   width: 100px;
   height: 100px;
   border-radius: 50%;
   margin-bottom: 15px;
}

.testimonial_text {
   font-style: italic;
   color: #555;
   margin-bottom: 15px;
}

.rating {
   font-size: 18px;
   color: #f39c12;
}

.carousel-inner {
   text-align: center;
}

.carousel-control-prev-icon, .carousel-control-next-icon {
   filter: invert(1);
}


   </style>
   <body>
      {% if messages %}
<div id="messages" class="alert-container">
    {% for message in messages %}
    <div class="alert alert-success" role="alert">
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}

      <!-- banner bg main start -->
      <div class="banner_bg_main">
         <!-- header top section start -->
         <div class="container">
            <div class="header_section_top">
               <div class="row">
                  <div class="col-sm-12">
                     <div class="custom_menu">
                        <ul>
                           <li><a href="#">home</a></li>
                           <li><a href="{% url 'product_list' %}">catalog</a></li>
                           <li><a href="#">Today's Deals</a></li>
                           <li><a href="#">Customer Service</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <!-- header top section start -->
         <!-- logo section start -->
         <div class="logo_section">
            <div class="container">
               <div class="row">
                  <div class="col-sm-12">
                     <div class="logo"><a href="{% url 'home' %}"><img src="static/shop/images/ecomlogo1.png"></a></div>
                  </div>
               </div>
            </div>
         </div>
         <!-- logo section end -->
         <!-- header section start -->
         <div class="header_section">
            <div class="container">
               <div class="containt_main">
                  <div class="dropdown">
                     <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">All Category 
                     </button>
                     <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="{% url 'product_list' %}">catalogue</a>
                        <a class="dropdown-item" href="#"></a>
                        <a class="dropdown-item" href="#"></a>
                     </div>
                  </div>
                  <div class="main">
                     <!-- Another variation with a button -->
                     <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search this blog">
                        <div class="input-group-append">
                           <button class="btn btn-secondary" type="button" style="background-color: #f26522; border-color:#f26522 ">
                           <i class="fa fa-search"></i>
                           </button>
                        </div>
                     </div>
                  </div>
                  <div class="header_box">
                     <div class="login_menu">
                        <ul>
                           
                           {% if user.is_authenticated %}
                               <li>
                                   <p>Hi, {{ user.username }}!</p>
                               </li>
                               <li><a href="{% url 'logout' %}">
                                   <i class="fa fa-sign-out" aria-hidden="true"></i>
                                   <span class="padding_10">Logout</span></a>
                               </li>
                           {% else %}
                               <li><a href="{% url 'login' %}">
                                   <i class="fa fa-user" aria-hidden="true"></i>
                                   <span class="padding_10">Login</span></a>
                               </li>
                           {% endif %}
                           <li>
                              <a href="#" data-toggle="modal" data-target="#cartModal">
                                  <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                  <span class="padding_10">Cart</span>
                              </a>
                          </li>
                       </ul>
                     </div>
                  </div>
                  

                  <!-- Modale Bootstrap -->
                     <div class="modal fade" id="cartModal" tabindex="-1" role="dialog" aria-labelledby="cartModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                           <div class="modal-content">
                              <div class="modal-header">
                                    <h5 class="modal-title" id="cartModalLabel">Your Cart</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                       <span aria-hidden="true">&times;</span>
                                    </button>
                              </div>
                              <div class="modal-body">
                                    <div id="cart-content">
                                       <!-- Le contenu du panier sera chargé ici via AJAX -->
                                    </div>
                              </div>
                              <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="button" class="btn btn-primary" id="placeOrderButton">Place order</button>
                              </div>
                           </div>
                        </div>
                     </div>
               </div>
            </div>
         </div>
         <!-- header section end -->
         <!-- banner section start -->
         <div class="banner_section layout_padding">
            <div class="container">
               <div id="my_slider" class="carousel slide" data-ride="carousel">
                  <div class="carousel-inner">
                     <div class="carousel-item active">
                        <div class="row">
                           <div class="col-sm-12">
                              <h1 class="banner_taital">trust us  <br>and we will take care of everything</h1>
                              <div class="buynow_bt"><a href="{% url 'product_list' %}">Buy Now</a></div>
                           </div>
                        </div>
                     </div>
                     <div class="carousel-item">
                        <div class="row">
                           <div class="col-sm-12">
                              <h1 class="banner_taital">Get Start <br>Your favriot shoping</h1>
                              <div class="buynow_bt"><a href="{% url 'product_list' %}">Buy Now</a></div>
                           </div>
                        </div>
                     </div>
                     <div class="carousel-item">
                        <div class="row">
                           <div class="col-sm-12">
                              <h1 class="banner_taital">be delivered  <br>and paid safely</h1>
                              <div class="buynow_bt"><a href="{% url 'product_list' %}">Buy Now</a></div>
                           </div>
                        </div>
                     </div>
                  </div>
                  <a class="carousel-control-prev" href="#my_slider" role="button" data-slide="prev">
                  <i class="fa fa-angle-left"></i>
                  </a>
                  <a class="carousel-control-next" href="#my_slider" role="button" data-slide="next">
                  <i class="fa fa-angle-right"></i>
                  </a>
               </div>
            </div>
         </div>
         <!-- banner section end -->
      </div>

      <div class="advertising_section layout_padding">
         <div class="container">
            <div class="row">
               <div class="col-md-12">
                  <h1 class="advertising_title">Nos offres spéciales</h1>
               </div>
            </div>
            <div class="row">
               <!-- Promotion 1 -->
               <div class="col-md-4">
                  <div class="advertising_box">
                     <img src="{% static 'shop/images/pngegg (33).png' %}" alt="Offre spéciale 1" class="img-fluid">
                     <p class="ad_text">Profitez de 20% de réduction sur nos produits !</p>
                  </div>
               </div>
               <!-- Promotion 2 -->
               <div class="col-md-4">
                  <div class="advertising_box">
                     <img src="{% static 'shop/images/pngegg (29).png' %}" alt="Offre spéciale" class="img-fluid">
                     <p class="ad_text">Livraison gratuite pour toute première commande !</p>
                  </div>
               </div>
               <!-- Promotion 3 -->
               <div class="col-md-4">
                  <div class="advertising_box">
                     <img src="{% static 'shop/images/pngegg (31)..png' %}" alt="Offre spéciale 3" class="img-fluid">
                     <p class="ad_text">Bénéficiez de 10% de réduction pour vos achats en lot.</p>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- banner bg main end -->
      <!-- fashion section start -->
      <div class="fashion_section">
         <div id="main_slider" class="carousel slide" data-ride="carousel">
             <div class="carousel-inner">
                 <div class="carousel-item active">
                     <div class="container">
                         <h1 class="fashion_taital">Produits</h1>
                         <div class="fashion_section_2">
                             <div class="row">
                                 {% for product in products %}
                                 <div class="col-lg-4 col-sm-4">
                                     <div class="box_main">
                                         <h4 class="shirt_text">{{ product.name }}</h4>
                                         <p class="price_text">Price <span style="color: #262626;">$ {{ product.price }}</span></p>
                                         <div class="tshirt_img">
                                             <img src="{{ product.image.url }}" alt="{{ product.name }}">
                                         </div>
                                         <div class="btn_main">
                                          <div class="buy_bt"><a href="{% url 'place_order' product.id %}">See More</a></div>
                                             <div class="seemore_bt"><a href="{% url 'add_to_cart' product.id %}">Add to Cart</a></div>
                                         </div>
                                     </div>
                                 </div>
                                 {% endfor %}
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
     </div>

     <!-- Advertising section -->


     
<!-- Section Témoignages avec carrousel -->
<div class="testimonials_section layout_padding">
   <div class="container">
      <div class="row">
         <div class="col-md-12">
            <h1 class="testimonials_title">Ce que disent nos utilisateurs</h1>
         </div>
      </div>
      <div class="row">
         <!-- Carrousel de témoignages -->
         <div id="testimonialCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
               <!-- Témoignage 1 -->
               <div class="carousel-item active">
                  <div class="col-md-12 text-center">
                     <img src="{% static 'shop/images/user1.jpg' %}" alt="Utilisateur 1" class="img-fluid rounded-circle testimonial-img">
                     <h3>Marie</h3>
                     <p class="testimonial_text">"Le site est fantastique ! J'ai trouvé tout ce dont j'avais besoin rapidement et à un bon prix."</p>
                     <p class="rating">⭐⭐⭐⭐⭐</p>
                  </div>
               </div>
               <!-- Témoignage 2 -->
               <div class="carousel-item">
                  <div class="col-md-12 text-center">
                     <img src="{% static 'shop/images/user2.jpg' %}" alt="Utilisateur 2" class="img-fluid rounded-circle testimonial-img">
                     <h3>Jean-Paul</h3>
                     <p class="testimonial_text">"Une expérience simple et agréable. Je recommande vivement ce site à mes amis !"</p>
                     <p class="rating">⭐⭐⭐⭐</p>
                  </div>
               </div>
               <!-- Témoignage 3 -->
               <div class="carousel-item">
                  <div class="col-md-12 text-center">
                     <img src="{% static 'shop/images/user3.jpg' %}" alt="Utilisateur 3" class="img-fluid rounded-circle testimonial-img">
                     <h3>Sophie</h3>
                     <p class="testimonial_text">"Les produits sont de bonne qualité et la livraison était rapide. Merci pour ce service !"</p>
                     <p class="rating">⭐⭐⭐⭐⭐</p>
                  </div>
               </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="prev">
               <span class="carousel-control-prev-icon" aria-hidden="true"></span>
               <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="next">
               <span class="carousel-control-next-icon" aria-hidden="true"></span>
               <span class="visually-hidden">Next</span>
            </button>
         </div>
      </div>
   </div>
</div>

      

      <div class="footer_section layout_padding">
         <div class="container">
            <div class="footer_logo"><a href="/"><img src="static/shop/images/ecomlogo1.png"></a></div>
            <div class="input_bt">
               <input type="text" class="mail_bt" placeholder="Your Email" name="Your Email">
               <span class="subscribe_bt" id="basic-addon2"><a href="#">Subscribe</a></span>
            </div>
            <div class="footer_menu">
               <ul>
                  <li><a href="#">Best Sellers</a></li>
                  <li><a href="#">Gift Ideas</a></li>
                  <li><a href="#">New Releases</a></li>
                  <li><a href="#">Today's Deals</a></li>
                  <li><a href="#">Customer Service</a></li>
               </ul>
            </div>
            <div class="location_main">Help Line  Number : <a href="#">+509 3944-7863</a></div>
         </div>
      </div>
      <!-- footer section end -->
      <!-- copyright section start -->
      <div class="copyright_section">
         <div class="container">
            <p class="copyright_text">© 2020 All Rights Reserved</p>
         </div>
      </div>
      <!-- copyright section end -->
      <!-- Javascript files-->
      <script src="{% static 'shop/js/jquery.min.js' %}"></script>
      <script src="{% static 'shop/js/popper.min.js' %}"></script>
      <script src="{% static 'shop/js/bootstrap.bundle.min.js' %}"></script>
      <script src="{% static 'shop/js/jquery-3.0.0.min.js' %}"></script>
      <script src="{% static 'shop/js/plugin.js' %}"></script>
      <!-- sidebar -->
      <script src="{% static 'shop/js/jquery.mCustomScrollbar.concat.min.js' %}"></script>
      <script src="{% static 'shop/js/custom.js' %}"></script>
      <script>
         function openNav() {
           document.getElementById("mySidenav").style.width = "250px";
         }
         
         function closeNav() {
           document.getElementById("mySidenav").style.width = "0";
         }
      </script>
      <script>
         // Charger le contenu du panier dans la modale
         $('#cartModal').on('show.bs.modal', function () {
             fetch("{% url 'get_cart_content' %}")
                 .then(response => response.json())
                 .then(data => {
                     document.getElementById('cart-content').innerHTML = data.html;
                 });
         });
     
         // Fonction pour supprimer un produit du panier
         function removeFromCart(cartId) {
    // Affiche une boîte de dialogue SweetAlert2 pour la confirmation
    Swal.fire({
        title: 'Are you sure?',
        text: "Do you really want to remove this item from your cart?",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, remove it!',
        cancelButtonText: 'Cancel'
    }).then((result) => {
        if (result.isConfirmed) {
            // Si l'utilisateur confirme, effectue la requête de suppression
            fetch(`/remove-from-cart/${cartId}/`, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}', // Nécessaire pour les requêtes POST
                },
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Recharge le contenu du panier
                    fetch("{% url 'get_cart_content' %}")
                        .then(response => response.json())
                        .then(data => {
                            document.getElementById('cart-content').innerHTML = data.html;

                            // Affiche un message de succès
                            Swal.fire(
                                'Deleted!',
                                'The item has been removed from your cart.',
                                'success'
                            );
                        });
                } else {
                    Swal.fire(
                        'Error!',
                        'Failed to remove the item. Please try again.',
                        'error'
                    );
                }
            
            });
        }
    });
}
document.addEventListener("DOMContentLoaded", function () {
    // Sélectionne et masque les alertes après 5 secondes
    setTimeout(function () {
        const messages = document.getElementById("messages");
        if (messages) {
            messages.style.transition = "opacity 0.5s ease";
            messages.style.opacity = "0";
            setTimeout(() => messages.remove(), 500); // Supprime complètement après la transition
        }
    }, 5000); // Temps d'attente en millisecondes
});
document.getElementById("placeOrderButton").addEventListener("click", function(event) {
    event.preventDefault();  // Empêcher l'action immédiate du bouton

    // Afficher une boîte de dialogue de confirmation avec SweetAlert
    Swal.fire({
        title: 'Êtes-vous sûr ?',
        text: "Vous êtes sur le point de passer cette commande.",
        icon: 'question',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Oui, passer commande',
        cancelButtonText: 'Annuler'
    }).then((result) => {
        if (result.isConfirmed) {
            // Soumettre le formulaire ou rediriger vers la page de commande
            window.location.href = "{% url 'order_from_cart' %}"; // Effectuer la redirection
        }
    });
});


     </script>

     
   </body>
</html>